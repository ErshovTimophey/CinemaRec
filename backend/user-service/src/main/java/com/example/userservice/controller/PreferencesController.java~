package com.example.userservice.controller;

import com.example.userservice.dto.PreferencesDTO;
import com.example.userservice.model.UserPreferences;
import com.example.userservice.service.PreferencesService;
import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/users/{userId}/preferences")
@RequiredArgsConstructor
//@CrossOrigin(origins = "http://localhost:3000")
public class PreferencesController {

    private final PreferencesService preferencesService;

    @PutMapping
    public ResponseEntity<UserPreferences> updatePreferences(
            @PathVariable String email,
            @RequestBody PreferencesDTO dto) {
        return ResponseEntity.ok(preferencesService.updatePreferences(email, dto));
    }

    @GetMapping
    public ResponseEntity<UserPreferences> getPreferences(@PathVariable String email) {
        System.out.println(email + " Юзер айди");
        return ResponseEntity.ok(preferencesService.getPreferences(email));
    }
}
